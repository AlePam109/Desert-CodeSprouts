<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Desert CodeSprouts - Cybersecurity Game</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <canvas id="matrixCanvas"></canvas>
  <img id="catImage" src="cat.png" alt="Cat Mascot" />
  <div id="instructionsButton" onclick="toggleInstructions()">Instructions</div>

  <div id="instructionsModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="toggleInstructions()">&times;</span>
      <h2>Instructions</h2>
      <div class="instructions-content">
        <h3>Substitution Cipher Challenge</h3>
        <p>In cryptography, a substitution cipher is a method of encrypting by which units of plaintext are replaced with ciphertext according to a fixed system.</p>
        <p>Your task is to break the cipher by:</p>
        <ol>
          <li>Analyzing the frequency of letters and words in the encrypted text</li>
          <li>Guessing letter mappings based on common patterns</li>
          <li>Testing your solution by typing in the input box</li>
        </ol>
        <p>Common patterns to look for:</p>
        <ul>
          <li>Single-letter words are usually 'a' or 'i'</li>
          <li>The most common letters in English are E, T, A, O, I, N</li>
          <li>Common word endings include -ing, -ed, -tion</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="game-header">
      <h1 class="glitch-title">Substitution Cipher Challenge</h1>
    </div>

    <!-- Challenge section -->
    <div class="challenge-section">
      <h2>Challenge #1</h2>
      <div class="challenge-text" id="challengeText">
        <!-- Challenge text will be inserted here -->
      </div>
      <button id="nextChallenge" class="hidden">Next Challenge</button>
    </div>

    <!-- Input box for encryption -->
    <textarea id="inputText" placeholder="Type here to encrypt or decrypt..."></textarea>
    <!-- Output box appears at the top -->
    <div class="output-container">
      <label>Encrypted/Decrypted Output:</label>
      <div id="outputText" class="output-display"></div>
    </div>

    <div class="tables">
      <!-- Left table container: Letter mappings + Encrypt button below -->
      <div class="table-container">
        <h3>Letter Mappings</h3>
        <table id="letterMappings">
          <thead>
            <tr>
              <th colspan="26">Map each letter to its substitution</th>
            </tr>
          </thead>
          <tbody>
            <!-- Letter mappings will be generated here -->
          </tbody>
        </table>
        <div class="button-row">
          <button onclick="encrypt()">Encrypt</button>
          <button onclick="decrypt()">Decrypt</button>
        </div>
      </div>
      <!-- Right table container: Word frequency + Analyze button below -->
      <div class="table-container">
        <h3>Word Frequency Analysis</h3>
        <table id="wordFrequency">
          <thead>
            <tr>
              <th>Word</th>
              <th>Frequency</th>
            </tr>
          </thead>
          <tbody>
            <!-- Default row: Always display example row -->
            <tr>
              <td><span class="clickable" onclick="highlightWord('example')">example</span></td>
              <td>5</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Hashing function box -->
    <div class="hashing-container">
      <h3>Hash Collision Game</h3>
      <p>Find an input that produces the same hash as the target!</p>
      <div class="hash-game-info">
        <p>Target Hash: <span id="targetHash"></span></p>
        <p>Hint: <span id="hashHint"></span></p>
        <p id="hashAttempts"></p>
      </div>
      <div class="hashing-box">
        <textarea id="hashInput" placeholder="Type here to generate hash..."></textarea>
        <div id="hashOutput" class="output-display"></div>
      </div>
      <p id="hashResult"></p>
      <button onclick="checkHashCollision()">Check Collision</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>